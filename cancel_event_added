events = {} # Global dictionary to store events

def create_event():
    """Prompts the user to create a new event."""
    event_id = input("Enter a unique Event ID: ")
    if event_id in events:
        print("Error: Event ID already exists. Please use a unique ID.")
        return

    name = input("Enter Event Name: ")
    try:
        max_attendees = int(input("Enter Maximum Attendees: "))
    except ValueError:
        print("Error: Maximum attendees must be a number.")
        return

    events[event_id] = {
        'name': name,
        'max_attendees': max_attendees,
        'attendees': [], # List to store registered attendees
        'status': 'active'
    }
    print(f"Event '{name}' created successfully with ID {event_id} and capacity {max_attendees}.")
def register_attendee():
    """Prompts the user to register multiple attendees for an existing event."""
    event_id = input("Enter the Event ID for registration: ")
    if event_id not in events:
        print("Error: Event ID not found.")
        return

    event = events[event_id]

    print(f"Registering for: {event['name']} (Capacity: {len(event['attendees'])}/{event['max_attendees']})")
    print("Type 'done' as the name to finish registering attendees.")

    while True:
        # Check capacity before accepting more
        if len(event['attendees']) >= event['max_attendees']:
            print("Error: Event is full. Cannot register more attendees.")
            break

        attendee_name = input("Enter Attendee Name: ").strip()

        if attendee_name.lower() == 'done':
            break

        if not attendee_name:
            print("Name cannot be empty.")
            continue

        if attendee_name in event['attendees']:
            print(f"Error: {attendee_name} is already registered.")
            continue

        event['attendees'].append(attendee_name)
        print(f"Attendee {attendee_name} registered successfully. "
                f"({len(event['attendees'])}/{event['max_attendees']})")
'''def register_attendee():
    """Prompts the user to register an attendee for an existing event."""
    event_id = input("Enter the Event ID for registration: ")
    if event_id not in events:
        print("Error: Event ID not found.")
        return

    event = events[event_id]
    if len(event['attendees']) >= event['max_attendees']:
        print("Error: Event is full. Cannot register more attendees.")
        return

    attendee_name = input("Enter Attendee Name: ")
    if attendee_name in event['attendees']:
        print("Error: Attendee is already registered for this event.")
        return

    event['attendees'].append(attendee_name)
    print(f"Attendee '{attendee_name}' registered for event '{event['name']}' successfully.")'''
def search_events():
    """Allows the user to search for events by ID or Name."""
    if not events:
        print("No events available to search.")
        return

    print("\nSearch By:")
    print("1. Event ID")
    print("2. Event Name")
    criteria = input("Enter your choice (1-2): ")

    if criteria == '1':
        # Search by exact Event ID
        search_id = input("Enter Event ID: ")
        if search_id in events:
            event = events[search_id]
            print(f"\n--- Event Found ---")
            print(f"ID: {search_id}")
            print(f"Name: {event['name']}")
            print(f"Status: {len(event['attendees'])}/{event['max_attendees']} attendees registered")
            print(f"Attendee List: {', '.join(event['attendees']) if event['attendees'] else 'Empty'}")
        else:
            print(f"Error: No event found with ID '{search_id}'.")

    elif criteria == '2':
        # Search by Name (partial match, case-insensitive)
        search_name = input("Enter Event Name (or part of it): ").lower()
        found = False

        print("\n--- Search Results ---")
        for event_id, event in events.items():
            if search_name in event['name'].lower():
                print(
                    f"ID: {event_id} | Name: {event['name']} | Spots Left: {event['max_attendees'] - len(event['attendees'])}")
                found = True

        if not found:
            print("No events found matching that name.")

    else:
        print("Invalid choice.")

def list_events():
    """Displays all created events and their details."""
    if not events:
        print("No events found.")
        return

    print("\nCurrent Events:")
    for event_id, event in events.items():
        print(f"\nID: {event_id}")
        print(f"Name: {event['name']}")
        print(f"Capacity: {len(event['attendees'])}/{event['max_attendees']}")
        print(f"Spots Left: {event['max_attendees'] - len(event['attendees'])}")
        print(f"Attendees: {', '.join(event['attendees']) if event['attendees'] else 'None'}")

def cancel_event():
    """Cancels an existing event by ID (soft delete)."""
    event_id = input("Enter the Event ID to cancel: ")
    if event_id not in events:
        print("Error: Event ID not found")
        return

    event = events[event_id]
    if event['status'] == 'canceled':
        print(f"Event '{event['name']}' is already canceled.")
        return

    confirm = input(f"Are you sure you want to cancel '{event['name']}'? (y/n): ").strip().lower()
    if confirm != 'y':
        print("Cancel operation aborted.")
        return

    event['status'] = 'canceled'
    print(f"Event '{event['name']}' (ID: ) {event_id}) has been canceled.")


def main_menu():
    """Provides a command-line interface for the user to interact with the system."""
    while True:
        print("\nEvent Management System Menu:")
        print("1. Create an Event")
        print("2. Register an Attendee")
        print("3. Search Events")
        print("4. List All Events")
        print("5. Cancel an Event")
        print("6. Exit")
        choice = input("Enter your choice (1-6): ")

        if choice == '1':
            create_event()
        elif choice == '2':
            register_attendee()
        elif choice == '3':
            search_events()
        elif choice == '4':
            list_events()
        elif choice == '5':
            cancel_event()
        elif choice == '6':
            print("Exiting program. Goodbye!")
            break
        else:
            print("Invalid choice. Please enter a number between 1 and 4.")
if __name__ == "__main__":
    main_menu()

def main_menu():
    """Updated main menu to include the Search option."""
    while True:
        print("\nEvent Management System Menu:")
        print("1. Create an Event")
        print("2. Register an Attendee")
        print("3. List All Events")
        print("4. Search for an Event")  # New Option
        print("5. Exit")
        choice = input("Enter your choice (1-5): ")

        if choice == '1':
            create_event()
        elif choice == '2':
            register_attendee()
        elif choice == '3':
            list_events()
        elif choice == '4':
            search_events()  # Call the new function
        elif choice == '5':
            print("Exiting program. Goodbye!")
            break
        else:
            print("Invalid choice. Please enter a number between 1 and 5.")
